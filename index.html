<!DOCTYPE html>
<html>
  <head>
    <title>My JsPsych Tutorial</title>
    <script src="jsPsych/jspsych.js"></script>
    <script src="jsPsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jsPsych/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jsPsych/plugins/jspsych-fullscreen.js"></script>
    <script src="jsPsych/plugins/jspsych-instructions.js"></script>
    <script src="jsPsych/plugins/jspsych-survey-multi-choice.js"></script>
    <link href="jsPsych/css/jspsych.css" rel="stylesheet" type="text/css">
  </head>
  <body></body>
  <script>

///////////////////////////////////////////////////////
/* create timeline */

var tl = []; //timeline initialized empty

/////////////////////////////////////////////////////
/* define the welcome & consent information */
var welcome = {
  type: "html-keyboard-response",
  stimulus: "Welcome to our experiment! Please turn off any music or television, and put your phone on silent" +
  "<p>Press any key to begin.</p>"
};
tl.push(welcome);

var consent = {
  type: "html-keyboard-response",
  stimulus: "Info here"
};
tl.push(consent);

var instComp = {
  type: "html-keyboard-response",
  stimulus: "<p>Before we get started, we need to switch to fullscreen and measure the screen you are using.</p>" + 
      "Navigating to the next page will automatically change your screen to fullscreen. Then we will ask for you to calibrate your screen." +
      "<p>Press any key to begin.</p>",
  post_trial_gap: 1000
};
tl.push(instComp);

tl.push({
  type: 'fullscreen',
  fullscreen_mode: true
});

var compSize = {
  type: 'resize',
  item_width: 3 + 3/8,
  item_height: 2 + 1/8,
  prompt: "<p>Click and drag the lower right corner of the box until the box is the same size as any credit card you have held up to the screen.</p>",
  pixels_per_unit: 150
};
tl.push(compSize);

/////////////////////////////////////////////////////
/* define the SCENARIOS */
var test_stimuli = [
  { stimulus: "jsPsych/examples/img/Fidel Castro.png",  correct_response: 'f'},
  { stimulus: "jsPsych/examples/img/Larry Nassar.png",  correct_response: 'j'},
  { stimulus: "jsPsych/examples/img/Vladimir Putin.png",  correct_response: 'j'}
];

/* define the OPTIONS */
var test_stimuli = [
  { stimulus: "jsPsych/examples/img/Fidel Castro.png",  correct_response: 'f'},
  { stimulus: "jsPsych/examples/img/Larry Nassar.png",  correct_response: 'j'},
  { stimulus: "jsPsych/examples/img/Vladimir Putin.png",  correct_response: 'j'}
];


/////////////////////////////////////////////////////
/* define the trials */

var instructions = {
  type: "html-keyboard-response",
  stimulus: "<p>You will now begin the experiment.</p>" + 
      "We are interested in how people make decisions about different kinds of events." + 
      "<p>You will be asked to read a number of stories and then make simple decisions about the stories.</p>" +
      "<p>You will be asked to make these decisions very quickly.</p>" +
      "<p style='position:fixed;bottom:0;width:50%;text-align:bottom'>Press any key to begin.</p>",
  post_trial_gap: 2000
};

var fixation = {
  type: 'html-keyboard-response',
  stimulus: '<div style="font-size:60px;">+</div>',
  choices: jsPsych.NO_KEYS,
  trial_duration: function(){
    return jsPsych.randomization.sampleWithoutReplacement([250, 500, 750, 1000, 1250, 1500], 1)[0];
 }
//  data: {test_part: 'fixation'}
}

var gen_instructions = {
  type: "html-keyboard-response",
  stimulus: "You will now begin the experiment.</p>" + 
      "<p>We'd like you to tell us whether it is true or false that something ought to be done.</p>" +
      "<p>To indicate that it is true that something ought to be done, please press the [f] key; to indicate that it is false that something ought to be done, please press the [j] key.</p>" +
      "<p> To get you used to the task, you will first go through a warm-up phase.</p>" + 
      "<p>On these trials, press [f] if you see the word <b>true</b> and [j] if you see the word <b>false</b>.</p>" +
      "<p><b>***You will have to respond very quickly, so please pay attention!***</b></p>" + 
      "<p>Press any key to begin.</p>",
  post_trial_gap: 1000
};

var task_instructions = {
  type: "html-keyboard-response",
  stimulus: "Great! In this part, you will read a story and then will be judging whether it is true or false that certain things ought to be done."+
  "<p>***Please answer as quickly and accurately as you possibly can. You will only have about 1 second to respond to each event.***</p>"};

var read_instructions = {
  type: "html-keyboard-response",
  stimulus: "Please read the following story"};

var scen_instructions = {
  type: "html-keyboard-response",
  stimulus: "Given the story you just read, please tell us whether it is true or false that Heinz ought to do the following things." +
  "<p> Press the SPACE BAR when you are ready to begin.</p>" +
  "<p>*** Remember, this will go very quickly!***</p>"};

var test = {
  type: "image-keyboard-response",
  stimulus: jsPsych.timelineVariable('stimulus'),
  choices: ['f', 'j'],
  data: {
    task: 'response',
    correct_response: jsPsych.timelineVariable('correct_response')
  }
}

/////////////////////////////////////////////////////
/* define survey information */
// havent added any individual diff measures yet

var DSR1q = ["Strongly disagree", "Mildly disagree", "Neither agree nor disagree", "Mildly agree", "Strongly agree"];
var Genderq = ["Male", "Female", "Non-binary", "Other"];
var PolIDq = ["Extremely Liberal", " ", " ", " Neither", " ", " ", "Extremely Conservative"];
var Relq = ["Not at all Religious", " ", " ", " ", " ", " ", "Extremely Religious"];
var Incomeq = ["Less than $10,000 USD a year", "$10,000 - $20,000 USD", "$20,000-$40,000 USD", "$40,000-$60,000 USD", "$60,000-$80,000 USD", "$80,000-$100,000 USD", "$100,000 USD a year or more"];
var Raceq = ["White, not hispanic or latinx", "Black or African American", "Asian", "American Indian or Alaska Native", "Native Hawaiian or Other Pacific Islander", "Hispanic or Latinx", "Two or more", "Not listed"];
var Handedq = ["Right-handed", "Left-handed", "Both"];
var Demand1q = ["Right-handed", "Left-handed", "Both"];
var Demand2q = ["Right-handed", "Left-handed", "Both"];
var compChangeq = ["I did not adjust my computer", "I adjusted my computer's brightness", "I adjusted the angle of my monitor/screen", "I adjusted both"];
var compTypeq = ["Laptop/Desktop", "Ipad/Tablet", "Other"];

  var DSR_b1 = {
            type: 'survey-multi-choice',
            questions: [
                {prompt: '<p style="text-align: left;font-size:20px;">A persons family is the most important thing in life.</p>', options: DSR1q, required: true, horizontal: true,}, 
                {prompt: '<p style="text-align: left;font-size:20px;">It would bother me to be in a science class, and to see a human hand preserved in a jar.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It bothers me to hear someone clear a throat full of mucous.</p>', options: DSR1q, required: true, horizontal: true,}, 
                {prompt: '<p style="text-align: left;font-size:20px;">I never let any part of my body touch the toilet seat in public restrooms.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">I would go out of my way to avoid walking through a graveyard.</p>', options: DSR1q, required: true, horizontal: true,}, 
                {prompt: '<p style="text-align: left;font-size:20px;">Seeing a cockroach in someone elses house doesnt bother me.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It would bother me tremendously to touch a dead body.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">If I see someone vomit, it makes me sick to my stomach.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">I probably would not go to my favorite restaurant if I found out that the cook had a cold.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It would not upset me at all to watch a person with a glass eye take the eye out of the socket.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It would bother me to see a rat run across my path in a park.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">I would rather eat a piece of fruit than a piece of paper.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">Even if I was hungry, I would not drink a bowl of my favorite soup if it had been stirred by a used but thoroughly washed flyswatter.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It would bother me to sleep in a nice hotel room if I knew that a man had died of a heart attack in that room the night before.</p>', options: DSR1q, required: true, horizontal: true}
            ],
            randomize_question_order: true,
            preamble: 'Please indicate how much you agree with each of the following statements, or how true it is about you. Please write a number (0-4) to indicate your answer:'
            };

  var demo_Age = {
        type: 'survey-text',
        questions: [
        {prompt: 'How old are you?', columns: 3, required: true, name: 'Age'},
        {prompt: 'What is your religious affiliation?', columns: 50, name: 'Religious Affiliation'}
        ],
        randomize_question_order: true
        };

  var Demographics = {
        type: 'survey-multi-choice',
        questions: [
            {prompt: '<p style="text-align: left;font-size:20px;">What is your Gender?</p>', options: page_1_options, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">What is your Race?</p>', options: page_2_options, required: true, horizontal: true},
            {prompt: '<p style="text-align: left;font-size:20px;">How religious would you consider yourself?</p>', options: page_3_options, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">What is your household income?</p>', options: page_4_options, required: true, horizontal: true},
            {prompt: '<p style="text-align: left;font-size:20px;">Which hand do you consider to be your dominant hand?</p>', options: page_5_options, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">Which of the following best describes your vision?</p>', options: page_6_options, required: true, horizontal: true}        ],
        randomize_question_order: true,
        preamble: '<p style="text-align: left;font-size:28px;"Using the scales provided, please respond to each question about you as an individual.</p>'
        };

  var demo_PolIQ = {
        type: 'survey-multi-choice',
        questions: [
            {prompt: '<p style="text-align: left;font-size:20px;">Which response best captures your political beliefs surrounding economic issues?</p>', options: page_1_options, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">Which response best captures your political beliefs surrounding social issues?</p>', options: page_2_options, required: true, horizontal: true},
            {prompt: '<p style="text-align: left;font-size:20px;">When it comes to overall political issues, you consider yourself to be a:</p>', options: page_3_options, required: true, horizontal: true,}
        ],
        randomize_question_order: true,
        preamble: '<p style="text-align: left;font-size:28px;"Please answer the following questions about your political ideology.</p>'
        };

  var demo_FinalQs = {
        type: 'survey-multi-choice',
        questions: [
            {prompt: '<p style="text-align: left;font-size:20px;">What kind of device did you use to complete this study?</p>', options: page_1_options, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">Did you adjust your computer in any way (its okay if you did! we just need to be able to account for it!)?</p>', options: page_2_options, required: true, horizontal: true},
            {prompt: '<p style="text-align: left;font-size:20px;">Did you feel pressure to respond in a particular way to any of the questions in order to appear a certain way?</p>', options: page_3_options, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">I felt as though I might be judged for my responses to the questions I answered.</p>', options: page_4_options, required: true, horizontal: true}        ],
        randomize_question_order: true,
        preamble: '<p style="text-align: left;font-size:28px;"For these final questions, please answer as honestly as you can! These will help us understand your results and will bare no influence on you!</p>'
        };

////////////////////////////////////////////////////////////////
/* define the procedure & order */

var task_procedure = {
      timeline: [fixation, test],
      timeline_variables: test_stimuli,
      repetitions: 4,
      randomize_order: true
    }

tl.push(instructions);
tl.push(task_instructions);
tl.push(task_procedure);
tl.push(DSR_b1);

////////////////////////////////////////////////////////////////
///* define debrief */

var debrief = {
      type: "html-keyboard-response",
      stimulus: "<p>Thank you for your participation!</p>" + 
      "<p>Some things.",
      post_trial_gap: 2000
    };
    tl.push(debrief);

////////////////////////////////////////////////////////////////
/* start the experiment */
jsPsych.init({
  timeline: tl
});
</script>
</html>
