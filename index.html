<!DOCTYPE html>
<html>
  <head>
    <title>P&C Paradigm</title>
    <script src="jsPsych/jspsych.js"></script>
    <script src="jsPsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jsPsych/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jsPsych/plugins/jspsych-fullscreen.js"></script>
    <script src="jsPsych/plugins/jspsych-instructions.js"></script>
    <script src="jsPsych/plugins/jspsych-survey-multi-choice.js"></script>
    <link href="jsPsych/css/jspsych.css" rel="stylesheet" type="text/css">
  </head>
  <body></body>
  <script>

///last changes made by Jordan on 4/20
///////////////////////////////////////////////////////
/* create timeline */

var tl = []; //timeline initialized empty

/////////////////////////////////////////////////////
/* define the welcome & consent information */
var welcome = {
  type: "html-keyboard-response",
  stimulus: "Welcome to our experiment! Please turn off any music or television, and put your phone on silent" +
  "<p>Press any key to begin.</p>"
};
tl.push(welcome);

var consent = {
  type: "html-keyboard-response",
  stimulus: "Info here"
};
tl.push(consent);

tl.push({
  type: 'fullscreen',
  message: '<div class="instructions"><p>Thank you for agreeing to participate.</p><p>Press the button below to begin in full screen mode.</p></div>',
  fullscreen_mode: true
});
    
var fixation = {
  type: 'html-keyboard-response',
  stimulus: '<div class="rsvp">+</div>',
  choices: jsPsych.NO_KEYS,
  trial_duration: 2000}

/////////////////////////////////////////////////////
/* define the SCENARIOS */
var scenario_stimuli1 = ["A person goes to a grocery store. They see an elderly dog lying on its side and ask a clerk how long it has been there. It has been lying there all day.  "];
var scenario_stimuli2 = ["A person’s daughter and they are shopping in a toy store at the mall. They find a wallet that has money and receipts in it."];
var scenario_stimuli3 = ["The day after a person marries their ex-husband, his previous girlfriend comes to their house and drops off their three-month old son. They didn’t see her again for eleven years and the person became wife and mom. The child was extremely undernourished and has ADHD."];
var scenario_stimuli4 = ["A person’s mom falls and hurts herself badly."];
var scenario_stimuli5 = ["A person gets a call from a friend who is overseas. His nephew is coming over to the States to go to medical school near them."];
var scenario_stimuli6 = ["A person is on the beach one day and sees a small dolphin roll up on the beach. They alert the lifeguard and he says that it happens all the time and it will just die."];
var scenario_stimuli7 = ["A person is friends with a woman who wants to pursue an acting career. She is going to pawn this ring that was in her family for years. They don’t want her to pawn the ring."];
var scenario_stimuli8 = ["A person has a bad relationship with his father and has not talked to him for years. He had left their mother. Their mother dies."];
var scenario_stimuli9 = ["A person’s friends and they are going skiing over the Christmas holiday. On their way up they were in a car accident and a small child in another is killed. They feel sorry for the mother."];
var scenario_stimuli10 = ["A person is at an office party and the company has decorated a room for a fancy dinner. At the end of the night their friends say that they can take the candles that are on the table. She doesn’t know that they aren’t supposed to take the candles."];
var scenario_stimuli11 = ["A person’s father becomes a widower and they try to do things for him. He would ask if they were doing okay."];

/* Adding all the scenarios to an array, we will loop through this array*/
/* TODO: Add in the remaining scenarios once the list is finalized*/
var scenarios = [scenario_stimuli1,scenario_stimuli2];

/* define the OPTIONS */
/* TODO: Add the remaining options once the list is finalized*/

var options1 = jsPsych.randomization.shuffle([
  { option: "Get it some water",  type: 'Ordinary',  correct_response: 'f'},
  { option: "Look around for the owner",  type: 'Ordinary',  correct_response: 'f'},
  { option: "Pet the dog",  type: 'Ordinary',  correct_response: 'f'},
  { option: "Give the dog a treat",  type: 'Ordinary',  correct_response: 'f'},
  { option: "Look at the dog's name tag",  type: 'Ordinary',  correct_response: 'f'},
  { option: "Rescue the dog and bring it home with you",   type: 'Saintly', correct_response: 'f'},
  { option: "Buy and give a dog a dog bed",   type: 'Saintly', correct_response: 'f'},
  { option: "Start an extensive search for the owner",   type: 'Saintly', correct_response: 'f'},
  { option: "Hang lost dog photos all over",   type: 'Saintly', correct_response: 'f'},
  { option: "Pay for a vet appointment",   type: 'Saintly', correct_response: 'f'},
  { option: "Turn back time, so that the dog was young again",   type: 'Impossible', correct_response: 'j'},
  { option: "Clone the dog",   type: 'Impossible', correct_response: 'j'},
  { option: "Give the dog eternal life",   type: 'Impossible', correct_response: 'j'},
  { option: "Instruct the dog in mindfulness meditation",   type: 'Impossible', correct_response: 'j'},
  { option: "Teach the dog to talk",   type: 'Impossible', correct_response: 'j'}
]);

var options2 = jsPsych.randomization.shuffle([
      { option: "Tell a worker about the wallet",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Look around for the owner",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Look through the receipts",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Look for the drivers license",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Figure out the wallet's brand",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Drive to the owner's house ",   type: 'Saintly', correct_response: 'f'},
      { option: "Search each store in the mall",   type: 'Saintly', correct_response: 'f'},
      { option: "Put $1000 into the wallet",   type: 'Saintly', correct_response: 'f'},
      { option: "Start making overhead announcements",   type: 'Saintly', correct_response: 'f'},
      { option: "Ask all passersby",   type: 'Saintly', correct_response: 'f'},
      { option: "Use telekinsesis to return the wallet",   type: 'Impossible', correct_response: 'j'},
      { option: "Use their &quot;sixth sense&quot;",   type: 'Impossible', correct_response: 'j'},
      { option: "Give the wallet sentience",   type: 'Impossible', correct_response: 'j'},
      { option: "Travel back in time",   type: 'Impossible', correct_response: 'j'},
      { option: "Gain dog-like sniffing abilities",   type: 'Impossible', correct_response: 'j'}]);

var options3 = jsPsych.randomization.shuffle([
      { option: "Talk to the child",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Feed the child",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Take the weight of the child",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Call the child's mom",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Read a story to the child",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Adopt the child",   type: 'Saintly', correct_response: 'f'},
      { option: "Start a college fund",   type: 'Saintly', correct_response: 'f'},
      { option: "Add the child to your will",   type: 'Saintly', correct_response: 'f'},
      { option: "Adopt another child as well",   type: 'Saintly', correct_response: 'f'},
      { option: "Abandon career to devote time to child",   type: 'Saintly', correct_response: 'f'},
      { option: "Clone the child",   type: 'Impossible', correct_response: 'j'},
      { option: "Cure the child's ADHD",   type: 'Impossible', correct_response: 'j'},
      { option: "Travel to the future",   type: 'Impossible', correct_response: 'j'},
      { option: "Create a magical supply of food",   type: 'Impossible', correct_response: 'j'},
      { option: "Change the child's memories",   type: 'Impossible', correct_response: 'j'}]);

var options4 = jsPsych.randomization.shuffle([
      { option: "Sned a get well soon card",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Send her flowers",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Call her to check on her",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Visit her in the hospital",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Arrange for a nurse",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Pay for ther medical expenses",   type: 'Saintly', correct_response: 'f'},
      { option: "Quit my job to care for her",   type: 'Saintly', correct_response: 'f'},
      { option: "Bring her to live in their home",   type: 'Saintly', correct_response: 'f'},
      { option: "Buy a new house for her",   type: 'Saintly', correct_response: 'f'},
      { option: "Donate an organ to her",   type: 'Saintly', correct_response: 'f'},
      { option: "Brew a potion to instantly heal her",   type: 'Impossible', correct_response: 'j'},
      { option: "Cast a spell to fix her pain",   type: 'Impossible', correct_response: 'j'},
      { option: "Travel to the future",   type: 'Impossible', correct_response: 'j'},
      { option: "Build a conscious robot to aid her",   type: 'Impossible', correct_response: 'j'},
      { option: "Give her an elixir that fixes her DNA",   type: 'Impossible', correct_response: 'j'}]);

var options5 = jsPsych.randomization.shuffle([
      { option: "Drive to the airport",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Take a few days off work",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Gave him their phone number",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Invite him for dinner",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Introduce him to their friends",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Buy a house for him",   type: 'Saintly', correct_response: 'f'},
      { option: "Pay for med school for him",   type: 'Saintly', correct_response: 'f'},
      { option: "Buy him a luxury car",   type: 'Saintly', correct_response: 'f'},
      { option: "Send him a daily care package",   type: 'Saintly', correct_response: 'f'},
      { option: "Hire him a tutor",   type: 'Saintly', correct_response: 'f'},
      { option: "Make someone fall in love with him",   type: 'Impossible', correct_response: 'j'},
      { option: "Give him superhuman intelligence",   type: 'Impossible', correct_response: 'j'},
      { option: "Buy him a teleportation device",   type: 'Impossible', correct_response: 'j'},
      { option: "Invent a VR surgery simulator",   type: 'Impossible', correct_response: 'j'},
      { option: "Cast a knowledge spell on him",   type: 'Impossible', correct_response: 'j'}]);

var options6 = jsPsych.randomization.shuffle([
      { option: "Sit with it to comfort it",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Take a photo for social media",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Fill a bucket with sea water",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Pray for it",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Make sure noone bothers it",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Arrange for a small helicopter",   type: 'Saintly', correct_response: 'f'},
      { option: "Swim it into the sea alone",   type: 'Saintly', correct_response: 'f'},
      { option: "Build a pool for it to live in",   type: 'Saintly', correct_response: 'f'},
      { option: "Start a dolphin sanctuary",   type: 'Saintly', correct_response: 'f'},
      { option: "Attend classses to learn about dolphin care",   type: 'Saintly', correct_response: 'f'},
      { option: "Turn it into a dog",   type: 'Impossible', correct_response: 'j'},
      { option: "Learn a dolphin language",   type: 'Impossible', correct_response: 'j'},
      { option: "Become a dolphin",   type: 'Impossible', correct_response: 'j'},
      { option: "Give it prosthetic legs",   type: 'Impossible', correct_response: 'j'},
      { option: "Give it dolphin psychotherapy",   type: 'Impossible', correct_response: 'j'}]);

var options7 = jsPsych.randomization.shuffle([
      { option: "Tell her not to pawn it",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Gift her a book on acting",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Connect her with a theater friend",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Lend her some money",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Give her a pep talk",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Help her get many auditions",   type: 'Saintly', correct_response: 'f'},
      { option: "Give her their credit card",   type: 'Saintly', correct_response: 'f'},
      { option: "Invest in a movie",   type: 'Saintly', correct_response: 'f'},
      { option: "Pawn their own valuables instead",   type: 'Saintly', correct_response: 'f'},
      { option: "Pay for professional acting lessons",   type: 'Saintly', correct_response: 'f'},
      { option: "Perform magic to get a role",   type: 'Impossible', correct_response: 'j'},
      { option: "Magically recreate the ring",   type: 'Impossible', correct_response: 'j'},
      { option: "Use psychic energy to win the lottery",   type: 'Impossible', correct_response: 'j'},
      { option: "Instantly become a director overnight",   type: 'Impossible', correct_response: 'j'},
      { option: "Copy a famous actor's brain chemistry",   type: 'Impossible', correct_response: 'j'}]);

var options8 = jsPsych.randomization.shuffle([
      { option: "Send him a short letter",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Send a text message",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Send over some flowersr",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Tell him they forgive him",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Make him a photo album",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Go to tell him I love him",   type: 'Saintly', correct_response: 'f'},
      { option: "Pay for his flight",   type: 'Saintly', correct_response: 'f'},
      { option: "Convince him to live with us",   type: 'Saintly', correct_response: 'f'},
      { option: "Get him a companion dog",   type: 'Saintly', correct_response: 'f'},
      { option: "Look for a new partner for him",   type: 'Saintly', correct_response: 'f'},
      { option: "Turn back time",   type: 'Impossible', correct_response: 'j'},
      { option: "Bring mom back from the death",   type: 'Impossible', correct_response: 'j'},
      { option: "Do a seance",   type: 'Impossible', correct_response: 'j'},
      { option: "Place him into an alternate timeline",   type: 'Impossible', correct_response: 'j'},
      { option: "Clone mom to marry him",   type: 'Impossible', correct_response: 'j'}]);

var options9 = jsPsych.randomization.shuffle([
      { option: "Go to the funeral",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Sit with the mom",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Dial 911",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Keep in contact with her",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Send some flowers to her home",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Perform CPR on the child",   type: 'Saintly', correct_response: 'f'},
      { option: "Free her with their bare hands",   type: 'Saintly', correct_response: 'f'},
      { option: "Pay for all her expenses",   type: 'Saintly', correct_response: 'f'},
      { option: "Set up a crowdfunding action",   type: 'Saintly', correct_response: 'f'},
      { option: "Invite her to all your Christmasses",   type: 'Saintly', correct_response: 'f'},
      { option: "Pray until the kid comes back to life",   type: 'Impossible', correct_response: 'j'},
      { option: "Clone the kid",   type: 'Impossible', correct_response: 'j'},
      { option: "Go back in time",   type: 'Impossible', correct_response: 'j'},
      { option: "Reverse their age",   type: 'Impossible', correct_response: 'j'},
      { option: "Create an alternate timeline",   type: 'Impossible', correct_response: 'j'}]);

var options10 = jsPsych.randomization.shuffle([
      { option: "Apologize",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Return them",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Send a sorry card",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Bring some new candles",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Pay for the candles",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Bring hundreds more candles",   type: 'Saintly', correct_response: 'f'},
      { option: "Write a big check",   type: 'Saintly', correct_response: 'f'},
      { option: "Go a month without salary",   type: 'Saintly', correct_response: 'f'},
      { option: "Make some new candles",   type: 'Saintly', correct_response: 'f'},
      { option: "Organize an entire new party",   type: 'Saintly', correct_response: 'f'},
      { option: "Change matter to unburn the candles",   type: 'Impossible', correct_response: 'j'},
      { option: "Turn back time",   type: 'Impossible', correct_response: 'j'},
      { option: "Invent candles that don't melt instantly",   type: 'Impossible', correct_response: 'j'},
      { option: "Guarentee profit by seeing the future",   type: 'Impossible', correct_response: 'j'},
      { option: "Charm the candles with magic",   type: 'Impossible', correct_response: 'j'}]);

var options11 = jsPsych.randomization.shuffle([
      { option: "Tell him the truth",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Tell a white lie",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Make him laugh",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Cheer him up",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Tell him not to worry",  type: 'Ordinary',  correct_response: 'f'},
      { option: "Find hima new girlfriend",   type: 'Saintly', correct_response: 'f'},
      { option: "Change careers",   type: 'Saintly', correct_response: 'f'},
      { option: "Get therapy",   type: 'Saintly', correct_response: 'f'},
      { option: "Get him a grandchild",   type: 'Saintly', correct_response: 'f'},
      { option: "Try to better their life",   type: 'Saintly', correct_response: 'f'},
      { option: "Bring mom back to life",   type: 'Impossible', correct_response: 'j'},
      { option: "Build a sentient mom robot",   type: 'Impossible', correct_response: 'j'},
      { option: "Cast a weekly anti-loneliness spell",   type: 'Impossible', correct_response: 'j'},
      { option: "Give him my own happiness",   type: 'Impossible', correct_response: 'j'},
      { option: "Reverse aging every week",   type: 'Impossible', correct_response: 'j'}]);

/* Add all options-arrays to yet another array */
/* By doing this we have an ordered array containing all the scenarios, as well as an array containing all the options ordered like the scenarios*/
/* TODO add in all the remaining options */
var options = [options1, options2, options3, options4, options5,
options6, options7, options8, options9, options10, options11]

/* Creating a list of shuffled numbers, we will use this list to ensure scenarios and options are randomized in the same way*/
/* Essentially, we will randomize this list and access our scenarios & options through this list */
/* Note that this list should have the same length as the "scenarios" variable*/
var shuffledList = jsPsych.randomization.shuffle([0,1])
console.log('shuffledList: '+shuffledList)

/////////////////////////////////////////////////////
/* define instruction information */

var gen_instructions = {
  type: "html-keyboard-response",
  stimulus: "<p>You will now begin the experiment.</p>" + 
      "<p>We'd like you to tell us whether different actions are possible or impossible responses to scenarios you will read about.</p>" +
      "You will have to make many of these decisions under time pressure." +
      "To indicate that it is true that something is possible, press the <b>[f]</b> key; to indicate that it is false that something is NOT possible, please press the <b>[j]</b> key.</p>" +
      "<p> To get you used to the task, you will first go through a warm-up phase.</p>" + 
      "On these trials, press [f] if you see the word <b>true</b> and [j] if you see the word <b>false</b>." +
      "<p><b>***You will have to respond very quickly, so please pay attention!***</b></p>" + 
      "<p>Press any key to begin.</p>",
  choices: " ",
  post_trial_gap: 1000
};
var task_instructions = {
  type: "html-keyboard-response",
  stimulus: "Great! In this part, you will read a scenario and then will be judging whether different actions are possible or impossible."+
  "<p>***Please answer as quickly and accurately as you possibly can. You will only have about <b>1 second</b> to respond to each event.***</p>",
  choices: " "
};

var read_instructions = {
  type: "html-keyboard-response",
  stimulus: "Please read the following scenario. The scenario will be displayed for 5 seconds.",
  choices: " "
};

var scen_instructions = {
  type: "html-keyboard-response",
  stimulus: "Given the scenario you just read, please tell us whether it is possible or impossible to do the following actions." +
  "<p> Press the SPACE BAR when you are ready to begin.</p>" +
  "<p>*** Remember, this will go very quickly!***</p>",
  choices: " "
};

var interim_block = {
  type: "html-keyboard-response",
  stimulus: "Great! You have completed a trial." +
  "<p> Press the SPACE BAR to begin the next trial.</p>",
  choices: " "
};
/////////////////////////////////////////////////////
/* define the procedure parts */

var scenario1 = {
  type: "html-keyboard-response",
  stimulus: scenario_stimuli1,
  choices: jsPsych.NO_KEYS,
  trial_duration: 5000,
};

var test1 = {
  type: "html-keyboard-response",
  stimulus: jsPsych.timelineVariable('option'),
  choices: ['f', 'j'],
  data: {
    test_part: 'response',
    correct_response: jsPsych.timelineVariable('correct_response')
  }
}

/////////////////////////////////////////////////////
/* define survey information */
// havent added any individual diff measures yet

var DSR1q = ["Strongly disagree", "Mildly disagree", "Neither agree nor disagree", "Mildly agree", "Strongly agree"];
var Genderq = ["Male", "Female", "Non-binary", "Other"];
var PolIDq = ["Extremely Liberal", " ", " ", " Neither", " ", " ", "Extremely Conservative"];
var Relq = ["Not at all Religious", " ", " ", " ", " ", " ", "Extremely Religious"];
var Incomeq = ["Less than $10,000 USD a year", "$10,000 - $20,000 USD", "$20,000-$40,000 USD", "$40,000-$60,000 USD", "$60,000-$80,000 USD", "$80,000-$100,000 USD", "$100,000 USD a year or more"];
var Raceq = ["White, not hispanic or latinx", "Black or African American", "Asian", "American Indian or Alaska Native", "Native Hawaiian or Other Pacific Islander", "Hispanic or Latinx", "Two or more", "Not listed"];
var Demand1q = ["Not at all", " ", " ", " ", "Very much so"];
var compTypeq = ["Laptop/Desktop", "Ipad/Tablet", "Other"];

  var DSR_b1 = {
            type: 'survey-multi-choice',
            questions: [
                {prompt: '<p style="text-align: left;font-size:20px;">A persons family is the most important thing in life.</p>', options: DSR1q, required: true, horizontal: true,}, 
                {prompt: '<p style="text-align: left;font-size:20px;">It would bother me to be in a science class, and to see a human hand preserved in a jar.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It bothers me to hear someone clear a throat full of mucous.</p>', options: DSR1q, required: true, horizontal: true,}, 
                {prompt: '<p style="text-align: left;font-size:20px;">I never let any part of my body touch the toilet seat in public restrooms.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">I would go out of my way to avoid walking through a graveyard.</p>', options: DSR1q, required: true, horizontal: true,}, 
                {prompt: '<p style="text-align: left;font-size:20px;">Seeing a cockroach in someone elses house doesnt bother me.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It would bother me tremendously to touch a dead body.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">If I see someone vomit, it makes me sick to my stomach.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">I probably would not go to my favorite restaurant if I found out that the cook had a cold.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It would not upset me at all to watch a person with a glass eye take the eye out of the socket.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It would bother me to see a rat run across my path in a park.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">I would rather eat a piece of fruit than a piece of paper.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">Even if I was hungry, I would not drink a bowl of my favorite soup if it had been stirred by a used but thoroughly washed flyswatter.</p>', options: DSR1q, required: true, horizontal: true},
                {prompt: '<p style="text-align: left;font-size:20px;">It would bother me to sleep in a nice hotel room if I knew that a man had died of a heart attack in that room the night before.</p>', options: DSR1q, required: true, horizontal: true}
            ],
            randomize_question_order: true,
            preamble: 'Please indicate how much you agree with each of the following statements, or how true it is about you. Please write a number (0-4) to indicate your answer:'
            };

  var demo_Age = {
        type: 'survey-text',
        questions: [
        {prompt: 'How old are you?', columns: 3, required: true, name: 'Age'},
        {prompt: 'What is your religious affiliation?', columns: 50, name: 'Religious Affiliation'}
        ],
        randomize_question_order: true
        };

  var demo_gen = {
        type: 'survey-multi-choice',
        questions: [
            {prompt: '<p style="text-align: left;font-size:20px;">What is your Gender?</p>', options: Genderq, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">What is your Race?</p>', options: Raceq, required: true, horizontal: true},
            {prompt: '<p style="text-align: left;font-size:20px;">How religious would you consider yourself?</p>', options: Relq, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">What is your household income?</p>', options: Incomeq, required: true, horizontal: true}
          ],
        randomize_question_order: true,
        preamble: '<p style="text-align: left;font-size:28px;"Using the scales provided, please respond to each question about you as an individual.</p>'
        };

  var demo_PolIQ = {
        type: 'survey-multi-choice',
        questions: [
            {prompt: '<p style="text-align: left;font-size:20px;">Which response best captures your political beliefs surrounding economic issues?</p>', options: PolIDq, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">Which response best captures your political beliefs surrounding social issues?</p>', options: PolIDq, required: true, horizontal: true},
            {prompt: '<p style="text-align: left;font-size:20px;">When it comes to overall political issues, you consider yourself to be a:</p>', options: PolIDq, required: true, horizontal: true,}
        ],
        randomize_question_order: true,
        preamble: '<p style="text-align: left;font-size:28px;"Please answer the following questions about your political ideology.</p>'
        };

  var demo_FinalQs = {
        type: 'survey-multi-choice',
        questions: [
            {prompt: '<p style="text-align: left;font-size:20px;">What kind of device did you use to complete this study?</p>', options: compTypeq, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">Did you feel pressure to respond in a particular way to any of the questions?</p>', options: Demand1q, required: true, horizontal: true,}, 
            {prompt: '<p style="text-align: left;font-size:20px;">Did you feel as though you might be judged for your responses to the questions you answered.</p>', options: Demand1q, required: true, horizontal: true}        
          ],
        randomize_question_order: true,
        preamble: '<p style="text-align: left;font-size:28px;"For these final questions, please answer as honestly as you can! The answers to these questions will not affect whether or not you receive credit/payment for participation!</p>'
        };


////////////////////////////////////////////////////////////////
/* define the procedure & order */
tl.push(gen_instructions);
tl.push(task_instructions);

tl.push(fixation);
tl.push(read_instructions)
/* Looping through all the scenarios */
    /* Because we are indexing scenarios through shuffled list, the order is randomized */
    for (var i = 0; i < shuffledList.length; i++){
            /* Show a random scenario */
            var display_scenarios = {
                type: "html-keyboard-response",
                stimulus: scenarios[shuffledList[i]], //jsPsych.timelineVariable("stimulus"),
                choices: jsPsych.NO_KEYS,
                trial_duration: 5000
            }
            tl.push(display_scenarios);

            /*Display the scenario instructions*/
            tl.push(scen_instructions)
            
            /*Looping through the options */
            /* Because we are indexing the options through shuffled list, the correct options per scenario are displayed */
            
            for (var j = 0; j < options[i].length; j++){
                var display_options = {
                    type: 'html-keyboard-response',
                    prompt: "<p style='text-align:bottom'>Press f for impossible, press j for possible.</p>",
                    choices: ['f','j'],
                    post_trial_gap: 1000,
                    stimulus: options[shuffledList[i]][j].option,
                    data: {test_part: 'response', correct_response: jsPsych.timelineVariable('correct_response')}
                };
                tl.push(display_options)
            }
            /* We probably want to display something in between scenarios to "reset" the block, we can put that here */
            tl.push(interim_block)
        };

//tl.push(DSR_b1);
tl.push(demo_Age);
tl.push(demo_gen);
tl.push(demo_PolIQ);
tl.push(demo_FinalQs);

////////////////////////////////////////////////////////////////
///* define debrief */

var debrief = {
      type: "html-keyboard-response",
      stimulus: "<p>Thank you for your participation!</p>" + 
      "<p>Some things.",
      post_trial_gap: 2000
    };
    tl.push(debrief);

////////////////////////////////////////////////////////////////
/* start the experiment */
jsPsych.init({
  timeline: tl
});
</script>
</html>
</html>
